# ðŸ§ª 13.2 `pytest` Basics

`pytest` is a **popular third-party testing framework** for Python.
Itâ€™s simpler and more powerful than `unittest`, and supports **fixtures, parameterized tests, and plugins**.

---

## ðŸ”‘ 1. Installation

```bash
pip install pytest
```

---

## ðŸ“Œ 2. Writing a Simple Test

Create a file named `test_calculator.py`:

```python
# calculator.py
def add(a, b):
    return a + b
```

```python
# test_calculator.py
from calculator import add

def test_add():
    assert add(2, 3) == 5
    assert add(-1, 1) == 0
```

Run tests:

```bash
pytest
```

âœ… `assert` statements are used instead of `self.assertEqual`.

---

## ðŸ“Œ 3. Naming Conventions

* Test files should start with `test_`
* Test functions should start with `test_`
* Helps pytest **discover tests automatically**

---

## ðŸ“Œ 4. Using Fixtures

Fixtures allow setup and teardown **for multiple tests**:

```python
import pytest

@pytest.fixture
def numbers():
    return [1, 2, 3, 4]

def test_sum(numbers):
    assert sum(numbers) == 10

def test_len(numbers):
    assert len(numbers) == 4
```

âœ… `@pytest.fixture` â†’ reusable test data or setup

---

## ðŸ“Œ 5. Parameterized Tests

```python
import pytest

@pytest.mark.parametrize("a, b, expected", [
    (2, 3, 5),
    (5, 5, 10),
    (-1, 1, 0)
])
def test_add(a, b, expected):
    from calculator import add
    assert add(a, b) == expected
```

âœ… Run the same test with **multiple data sets**.

---

## ðŸŽ¯ Mini Project: Testing a Simple Bank Account

```python
# bank.py
class BankAccount:
    def __init__(self, balance=0):
        self.balance = balance

    def deposit(self, amount):
        self.balance += amount

    def withdraw(self, amount):
        if amount <= self.balance:
            self.balance -= amount
            return True
        return False
```

```python
# test_bank.py
import pytest
from bank import BankAccount

@pytest.fixture
def account():
    return BankAccount(100)

def test_deposit(account):
    account.deposit(50)
    assert account.balance == 150

def test_withdraw(account):
    assert account.withdraw(70) == True
    assert account.balance == 30
    assert account.withdraw(50) == False
```

âœ… Demonstrates **fixtures, deposit/withdraw tests, and assertions**.

---

## ðŸ§  Best Practices

* Use **pytest fixtures** for setup/teardown
* Name test files/functions with **`test_` prefix**
* Keep tests **small and independent**
* Use `pytest.mark.parametrize` for **multiple input sets**
* Run `pytest -v` for **detailed output**

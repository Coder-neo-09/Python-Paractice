# ⚠️ 6.4 Exception Handling with Files

When working with files, many things can go wrong:

* File may not exist
* File may be read-only
* File may be locked by another program
* Disk may not have enough space

👉 That’s why we use **`try ... except`** with file operations.

---

## 📌 1. Handling Missing File

```python
try:
    with open("missing.txt", "r") as f:
        print(f.read())
except FileNotFoundError:
    print("Error: File does not exist ❌")
```

✅ Prevents program crash if file is missing.

---

## 📌 2. Handling Permission Errors

```python
try:
    with open("/system/protected.txt", "w") as f:
        f.write("data")
except PermissionError:
    print("Error: You don’t have permission 🚫")
```

✅ Prevents writing to restricted locations.

---

## 📌 3. Multiple Exceptions

```python
try:
    with open("data.txt", "r") as f:
        print(f.read())
except FileNotFoundError:
    print("Error: File not found ❌")
except PermissionError:
    print("Error: Permission denied 🚫")
```

✅ Catches specific issues separately.

---

## 📌 4. `finally` Block

```python
try:
    f = open("log.txt", "w")
    f.write("Logging data...")
except Exception as e:
    print("Error:", e)
finally:
    f.close()
    print("File closed ✅")
```

✅ Ensures file is always closed, even if error happens.

*(though using `with open(...)` is better than manually closing).*

---

## 🎯 Mini Project: Safe File Reader

👉 A program that safely reads user-specified files.

```python
def safe_read(filename):
    try:
        with open(filename, "r") as f:
            return f.read()
    except FileNotFoundError:
        return "❌ Error: File not found"
    except PermissionError:
        return "🚫 Error: Permission denied"
    except Exception as e:
        return f"⚠️ Unexpected error: {e}"

print(safe_read("notes.txt"))
print(safe_read("unknown.txt"))
```

✅ Handles different errors gracefully without crashing.

---

## 🧠 Best Practices

* Always handle **`FileNotFoundError`** and **`PermissionError`**
* Use `with open(...)` → auto closes file
* Catch generic `Exception` only for debugging/logging, not in production
